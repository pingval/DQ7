<!-- TOC depthFrom:1 depthTo:3 insertAnchor:false orderedList:false -->

- [PS版DQ7 イノゴン戦シミュレータ](#ps版dq7-イノゴン戦シミュレータ)
  - [使い方](#使い方)
  - [出力の例](#出力の例)
    - [`$option[:N] = 10000`](#optionn--10000)
    - [`$option[:log_timing] = :turn`](#optionlog_timing--turn)
    - [`$option[:log_timing] = :result`](#optionlog_timing--result)
  - [ToDo](#todo)

<!-- /TOC -->

# PS版DQ7 イノゴン戦シミュレータ

PS版DQ7RTAにおいて最も勝率が低いとされている戦闘であるイノゴン戦の勝率を楽して見極めるために**今更**作ったやつ。[RGPツクールVX Ace](https://store.steampowered.com/app/220700/RPG_Maker_VX_Ace/)のスクリプトRGSS3を元にしています。

現在、[自分の装備配分](https://github.com/pingval/DQ7/raw/master/psdq7-status.zip)＆[戦術](https://github.com/pingval/DQ7/blob/master/pingval-psdq7-Aira183-chart.txt#L1649)のみ対応(大元の[腹黒パンダ氏の](https://harapan.exblog.jp/15510551/)とはちょっと違う)。

## 使い方

`Ruby psdq7_InoGon_simulator.rb`

$optionをいろいろ書き換えていろいろやる。

## 出力の例

### `$option[:N] = 10000`
10000回試行。

```
N = 10000
Maribel's Level = 10

Win rate:	72.86%
* Win
  Ave. turn count: 20.68
  Party:
                                        No.1      No.2      No.3
    Death rate on battle end          14.12%     6.49%     6.11%
    Ave. HP on battle end              43.93     65.14     48.88
    Ave. Herb count                     0.23      0.81       NaN
    Ave. Leaf count                     0.00      0.65      0.51
  Distribution of Leaf count:
        0    21.81%
        1    39.98%
        2    38.21%
    Ave.       1.16
  Troop:
                                        No.1      No.2
    Death rate on battle end         100.00%   100.00%
    Ave. HP on battle end               0.00      0.00

* Lose
  Ave. turn count: 18.24
  Party:
                                        No.1      No.2      No.3
    Death rate on battle end         100.00%   100.00%   100.00%
    Ave. HP on battle end               0.00      0.00      0.00
    Ave. Herb count                     0.22      0.56       NaN
    Ave. Leaf count                     0.00      0.62      0.55
  Distribution of Leaf count:
        0    20.82%
        1    41.05%
        2    38.14%
    Ave.       1.17
  Troop:
                                        No.1      No.2
    Death rate on battle end           3.61%     4.97%
    Ave. HP on battle end             157.18    143.17

* Both
  Ave. turn count: 20.02
  Party:
                                        No.1      No.2      No.3
    Death rate on battle end          37.43%    31.87%    31.59%
    Ave. HP on battle end              32.01     47.46     35.61
    Ave. Herb count                     0.23      0.74       NaN
    Ave. Leaf count                     0.00      0.64      0.52
  Distribution of Leaf count:
        0    21.54%
        1    40.27%
        2    38.19%
    Ave.       1.17
  Troop:
                                        No.1      No.2
    Death rate on battle end          73.84%    74.21%
    Ave. HP on battle end              42.66     38.86
```
### `$option[:log_timing] = :turn`
戦闘ログを1Tごとに出力する。

```
   1T:      イノ440/440 |      ゴン400/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 57/ 57 |      カシム65000/65000
   2T:      イノ392/440 |      ゴン381/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 57/ 57 |      カシム64962/65000
   3T:      イノ372/440 |      ゴン362/400 |      ガ 59/ 59 |      主 47/ 82 |      マ 57/ 57 |      カシム64962/65000
   4T:      イノ341/440 |      ゴン362/400 |      ガ 24/ 59 | [死 ]主  0/ 82 |      マ 57/ 57 |      カシム64997/65000
   5T:      イノ341/440 |      ゴン362/400 |      ガ 10/ 59 |      主 82/ 82 | [暗5]マ 57/ 57 | [暗5]カシム64997/65000
   6T:      イノ321/440 |      ゴン343/400 |      ガ 59/ 59 |      主 46/ 82 | [暗4]マ 36/ 57 | [暗4]カシム64997/65000
   7T:      イノ321/440 |      ゴン343/400 |      ガ 46/ 59 |      主 70/ 82 | [暗3]マ 36/ 57 | [暗3]カシム64997/65000
   8T:      イノ298/440 |      ゴン324/400 |      ガ 46/ 59 |      主 46/ 82 | [暗2]マ 57/ 57 | [暗2]カシム64963/65000
   9T:      イノ298/440 |      ゴン324/400 |      ガ 28/ 59 |      主 78/ 82 | [暗1]マ 30/ 57 | [暗1]カシム64963/65000
  10T:      イノ298/440 |      ゴン324/400 |      ガ 46/ 59 |      主 78/ 82 |      マ 57/ 57 |      カシム64931/65000
  11T:      イノ250/440 |      ゴン308/400 |      ガ 59/ 59 |      主 16/ 82 |      マ 34/ 57 |      カシム64931/65000
  12T:      イノ250/440 |      ゴン273/400 |      ガ 43/ 59 |      主 51/ 82 |      マ 34/ 57 |      カシム64893/65000
  13T:      イノ250/440 |      ゴン273/400 |      ガ 25/ 59 |      主 82/ 82 |      マ 57/ 57 |      カシム64846/65000
  14T:      イノ227/440 |      ゴン226/400 |      ガ 33/ 59 |      主 50/ 82 |      マ 57/ 57 |      カシム64846/65000
  15T:      イノ227/440 |      ゴン226/400 | [暗7]ガ 59/ 59 |      主 62/ 82 |      マ 57/ 57 | [暗5]カシム64846/65000
  16T:      イノ227/440 |      ゴン189/400 | [暗6]ガ 44/ 59 | [暗5]主 82/ 82 |      マ 57/ 57 | [暗4]カシム64846/65000
  17T:      イノ227/440 |      ゴン144/400 | [暗5]ガ 59/ 59 | [暗4]主 82/ 82 |      マ 33/ 57 | [暗3]カシム64819/65000
  18T:      イノ207/440 |      ゴン126/400 | [暗4]ガ 59/ 59 | [暗3]主 82/ 82 |      マ 57/ 57 | [暗2]カシム64746/65000
  19T:      イノ207/440 |      ゴン109/400 | [暗3]ガ 59/ 59 | [暗2]主 82/ 82 |      マ 31/ 57 | [暗1]カシム64713/65000
  20T:      イノ180/440 |      ゴン109/400 | [暗2]ガ 42/ 59 | [暗1]主 82/ 82 |      マ 36/ 57 |      カシム64713/65000
  21T:      イノ180/440 |      ゴン109/400 | [暗1]ガ 42/ 59 |      主 52/ 82 | [暗4]マ 57/ 57 | [暗5]カシム64713/65000
  22T:      イノ156/440 |      ゴン 59/400 |      ガ 42/ 59 |      主 82/ 82 | [暗3]マ 37/ 57 | [暗4]カシム64618/65000
  23T:      イノ156/440 |      ゴン 59/400 | [暗5]ガ 42/ 59 | [暗4]主 82/ 82 | [暗2]マ 57/ 57 | [暗3]カシム64618/65000
  24T:      イノ103/440 |      ゴン 59/400 | [暗4]ガ 42/ 59 | [暗3]主 82/ 82 | [死 ]マ  0/ 57 | [暗2]カシム64591/65000
  25T:      イノ103/440 |      ゴン 59/400 | [暗3]ガ 42/ 59 | [暗2]主 52/ 82 |      マ 57/ 57 | [暗1]カシム64519/65000
  26T:      イノ 76/440 |      ゴン 43/400 | [暗2]ガ  4/ 59 | [暗1]主 82/ 82 |      マ 57/ 57 |      カシム64519/65000
  27T:      イノ 55/440 |      ゴン 43/400 | [暗1]ガ 59/ 59 |      主 12/ 82 |      マ 57/ 57 |      カシム64489/65000
  28T:      イノ 19/440 |      ゴン 43/400 |      ガ  3/ 59 |      主 76/ 82 |      マ 57/ 57 |      カシム64489/65000
  29T: [死 ]イノ  0/440 |      ゴン 43/400 | [死 ]ガ  0/ 59 |      主 82/ 82 |      マ 57/ 57 |      カシム64489/65000
victory[死 ]イノ  0/440 | [死 ]ゴン  0/400 | [死 ]ガ  0/ 59 |      主 82/ 82 |      マ 35/ 57 |      カシム64489/65000
```

### `$option[:log_timing] = :result`
戦闘ログを最も詳しく出力する。

```
   1T:      イノ440/440 |      ゴン400/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 56/ 56 |      カシム65000/65000
    ガ: 防御
    イノ: 攻撃 to 主
      主: HP-31 ( 51/ 82)
    カシム: 攻撃 to イノ
      イノ: HP-29 (411/440)
    ゴン: 痛恨の一撃(攻撃×2.5) to ガ
      ガ: HP-35 ( 24/ 59)
    マ: 奇跡の石 to ガ
      ガ: HP+37 ( 59/ 59)
    主: ブーメラン to イノ, ゴン
      イノ: HP-21 (390/440)
      ゴン: HP-19 (381/400)
   2T:      イノ390/440 |      ゴン381/400 |      ガ 59/ 59 |      主 51/ 82 |      マ 56/ 56 |      カシム65000/65000
    ガ: 防御
    イノ: 痛恨の一撃(攻撃×2.5) to 主
      主: HP-70 (  0/ 82)
    カシム: 様子を見る
    ゴン: 尻尾 to ガ
      ガ: HP-16 ( 43/ 59)
    マ: 奇跡の石 to ガ
      ガ: HP+33 ( 59/ 59)
   3T:      イノ390/440 |      ゴン381/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 56/ 56 |      カシム65000/65000
    ガ: 防御
    イノ: 武器を振り回す to カシム
      カシム: HP-43 (64957/65000)
    ゴン: 爪できりさく to マ
      マ: HP-22 ( 34/ 56)
    カシム: 斬りつける to イノ
      イノ: HP-31 (359/440)
    マ: 世界樹の葉 to 主
      主: HP+82 ( 82/ 82)
   4T:      イノ359/440 |      ゴン381/400 |      ガ 59/ 59 |      主 82/ 82 |      マ 34/ 56 |      カシム64957/65000
    ガ: 防御
    ゴン: 爪できりさく to ガ
      ガ: HP-17 ( 42/ 59)
    イノ: 痛恨の一撃(攻撃×2.5) to 主
      主: HP-75 (  7/ 82)
    カシム: 攻撃 to イノ
      イノ: HP-26 (333/440)
    マ: 奇跡の石 to マ
      マ: HP+32 ( 56/ 56)
    主: ブーメラン to イノ, ゴン
      イノ: HP-24 (309/440)
      ゴン: HP-19 (362/400)
   5T:      イノ309/440 |      ゴン362/400 |      ガ 42/ 59 |      主  7/ 82 |      マ 56/ 56 |      カシム64957/65000
    ガ: 防御
    イノ: 攻撃 to ガ
      ガ: HP-16 ( 26/ 59)
    ゴン: 爪できりさく to カシム
      カシム: HP-33 (64924/65000)
    カシム: 斬りつける to イノ
      イノ: HP-31 (278/440)
    マ: 奇跡の石 to 主
      主: HP+34 ( 41/ 82)
    主: 薬草 to 主
      主: HP+35 ( 76/ 82)
   6T:      イノ278/440 |      ゴン362/400 |      ガ 26/ 59 |      主 76/ 82 |      マ 56/ 56 |      カシム64924/65000
    ガ: 防御
    イノ: 痛恨の一撃(攻撃×2.5) to ガ
      ガ: HP-41 (  0/ 59)
    ゴン: 攻撃 to カシム
      カシム: HP-30 (64894/65000)
    カシム: 様子を見る
    マ: 奇跡の石 to マ
    主: ブーメラン to イノ, ゴン
      イノ: HP-20 (258/440)
      ゴン: HP-19 (343/400)
   7T:      イノ258/440 |      ゴン343/400 | [死 ]ガ  0/ 59 |      主 76/ 82 |      マ 56/ 56 |      カシム64894/65000
    イノ: 砂煙 to 主, マ, カシム
      主: +[暗7]
      マ: +[暗5]
    カシム: 攻撃 to ゴン
      ゴン: HP-26 (317/400)
    ゴン: 痛恨の一撃(攻撃×2.5) to 主
      主: HP-60 ( 16/ 82)
    マ: 奇跡の石 to 主
      主: HP+33 ( 49/ 82)
    主: 世界樹の葉 to ガ
      ガ: HP+59 ( 59/ 59)
   8T:      イノ258/440 |      ゴン317/400 |      ガ 59/ 59 | [暗6]主 49/ 82 | [暗4]マ 56/ 56 |      カシム64894/65000
    ガ: 防御
    ゴン: 攻撃 to ガ
      ガ: HP-15 ( 44/ 59)
    イノ: 攻撃 to カシム
      カシム: HP-37 (64857/65000)
    カシム: 様子を見る
    マ: 奇跡の石 to 主
      主: HP+34 ( 82/ 82)
    主: ブーメラン to イノ, ゴン
      イノ: HP-20 (238/440)
      missed to ゴン
   9T:      イノ238/440 |      ゴン317/400 |      ガ 44/ 59 | [暗5]主 82/ 82 | [暗3]マ 56/ 56 |      カシム64857/65000
    ガ: 防御
    ゴン: 爪できりさく to 主
      主: HP-32 ( 50/ 82)
    カシム: 斬りつける to イノ
      イノ: HP-36 (202/440)
    イノ: 痛恨の一撃(攻撃×2.5) to 主
      主: HP-70 (  0/ 82)
    マ: 奇跡の石 to ガ
      ガ: HP+34 ( 59/ 59)
  10T:      イノ202/440 |      ゴン317/400 |      ガ 59/ 59 | [死 ]主  0/ 82 | [暗2]マ 56/ 56 |      カシム64857/65000
    ガ: 防御
    カシム: 攻撃 to ゴン
      ゴン: HP-30 (287/400)
    ゴン: 攻撃 to ガ
      ガ: evaded
    イノ: 攻撃 to ガ
      ガ: HP-18 ( 41/ 59)
    マ: 奇跡の石 to マ
  11T:      イノ202/440 |      ゴン287/400 |      ガ 41/ 59 | [死 ]主  0/ 82 | [暗1]マ 56/ 56 |      カシム64857/65000
    ガ: 防御
    イノ: 砂煙 to ガ, マ, カシム
    カシム: 斬りつける to ゴン
      ゴン: HP-35 (252/400)
    ゴン: 尻尾 to カシム
      カシム: HP-38 (64819/65000)
    マ: 奇跡の石 to ガ
      ガ: HP+30 ( 59/ 59)
  12T:      イノ202/440 |      ゴン252/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 56/ 56 |      カシム64819/65000
    ガ: 防御
    ゴン: 攻撃 to マ
      マ: HP-22 ( 34/ 56)
    イノ: 武器を振り回す to カシム
      カシム: HP-40 (64779/65000)
    カシム: 様子を見る
    マ: 奇跡の石 to マ
      マ: HP+36 ( 56/ 56)
  13T:      イノ202/440 |      ゴン252/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 56/ 56 |      カシム64779/65000
    ガ: 防御
    イノ: 攻撃 to ガ
      ガ: HP-16 ( 43/ 59)
    カシム: 攻撃 to ゴン
      ゴン: HP-29 (223/400)
    ゴン: 爪できりさく to マ
      マ: HP-23 ( 33/ 56)
    マ: 奇跡の石 to マ
      マ: HP+33 ( 56/ 56)
  14T:      イノ202/440 |      ゴン223/400 |      ガ 43/ 59 | [死 ]主  0/ 82 |      マ 56/ 56 |      カシム64779/65000
    ガ: 防御
    イノ: 攻撃 to カシム
      カシム: HP-36 (64743/65000)
    ゴン: 攻撃 to ガ
      ガ: HP-14 ( 29/ 59)
    カシム: 様子を見る
    マ: 奇跡の石 to ガ
      ガ: HP+40 ( 59/ 59)
  15T:      イノ202/440 |      ゴン223/400 |      ガ 59/ 59 | [死 ]主  0/ 82 |      マ 56/ 56 |      カシム64743/65000
    ガ: 防御
    イノ: 武器を振り回す to ガ
      ガ: HP-22 ( 37/ 59)
    ゴン: 爪できりさく to マ
      マ: evaded
    カシム: 斬りつける to ゴン
      ゴン: HP-32 (191/400)
    マ: 奇跡の石 to マ
  16T:      イノ202/440 |      ゴン191/400 |      ガ 37/ 59 | [死 ]主  0/ 82 |      マ 56/ 56 |      カシム64743/65000
    ガ: 防御
    カシム: 攻撃 to ゴン
      ゴン: HP-29 (162/400)
    イノ: 痛恨の一撃(攻撃×2.5) to ガ
      ガ: HP-41 (  0/ 59)
    ゴン: 痛恨の一撃(攻撃×2.5) to カシム
      カシム: HP-75 (64668/65000)
    マ: 奇跡の石 to カシム
      カシム: HP+32 (64700/65000)
  17T:      イノ202/440 |      ゴン162/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 56/ 56 |      カシム64700/65000
    マ: 防御
    カシム: 斬りつける to ゴン
      ゴン: HP-36 (126/400)
    イノ: 攻撃 to カシム
      カシム: HP-35 (64665/65000)
    ゴン: 攻撃 to カシム
      カシム: HP-27 (64638/65000)
  18T:      イノ202/440 |      ゴン126/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 56/ 56 |      カシム64638/65000
    マ: 防御
    ゴン: 痛恨の一撃(攻撃×2.5) to マ
      マ: HP-23 ( 33/ 56)
    カシム: 様子を見る
    イノ: 攻撃 to マ
      マ: HP-13 ( 20/ 56)
  19T:      イノ202/440 |      ゴン126/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 |      マ 20/ 56 |      カシム64638/65000
    マ: 防御
    イノ: 攻撃 to マ
      マ: HP-12 (  8/ 56)
    カシム: 攻撃 to ゴン
      ゴン: HP-27 ( 99/400)
    ゴン: 尻尾 to マ
      マ: HP-11 (  0/ 56)
defeat      イノ202/440 |      ゴン 99/400 | [死 ]ガ  0/ 59 | [死 ]主  0/ 82 | [死 ]マ  0/ 56 |      カシム64638/65000
```

## ToDo
- カシムHP自動回復
- けった1249
- おかかメシさんの打打石
- 奴隷先輩1250
